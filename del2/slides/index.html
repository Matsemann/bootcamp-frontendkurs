<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Webutvikling 101</title>
    <link rel="stylesheet" href="https://cdn.rawgit.com/bekk/remark/master/dist/bekk.css">
    <link rel="stylesheet" href="slides.css">
  </head>
  <body class="bekk-black">
    <textarea id="source">

class: front-page
  # Webutvikling 101
  ## NTNU

  <span class="today-date"></span>
---
#Webutvikling 101

##Repo
<div style="font-size: 2em">
  <a href="https://github.com/bekk/webutvikling101">http://tiny.cc/bekkweb101</a>
</div>
<br>
<br>
<div style="font-size: 2em">
  <a href="https://github.com/bekk/webutvikling101">github/bekk/webutvikling101</a>
</div>

---
class: center middle

<button id="load-data" class="btn loud">Last mer data</button>
---

<div class="example-box" style="
  top: 30%;
  height: 200px;
">
  Klient
</div>

<div class="example-box" style="
  top: 22%;
  right: 2em;
">
  Server
</div>

--

<div class="example-arrow arrow-right" style="top: 250px;">
  Request
</div>

--

<div class="example-arrow arrow-left" style="top: 350px;">
  Response
</div>

---


<div class="example-box" style="
  top: 30%;
  height: 200px;
">
  Klient
</div>

<div class="example-box" style="
  top: 22%;
  right: 2em;
">
  Server
</div>

<div class="example-arrow arrow-right" style="
  top: 250px;
  text-transform: lowercase;
">
  http://localhost:5000/sok?tag=bekk
</div>

<div class="example-arrow arrow-left" style="
  top: 350px;
  text-transform: none;
  text-align: left;
">
  <pre style="
  margin: 0;
  padding: 0 1em;
  font-size: 0.8em;
">
[{
  "url":"https://flickr.com/bilde1.jpg",
  "title":"Fint bilde av en bekker"
},{...}]
  </pre>
</div>
---
# Laste data

```javascript
  var httpRequest = new XMLHttpRequest();

  httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
      if (httpRequest.status === 200) {
        var data = JSON.parse(httpRequest.responseText);
        console.log(data);
      } else {
        console.log('There was a problem with the request.');
      }
    }
  }

  httpRequest.open('GET', 'http://localhost:5000/sok?tag=bekk'); // Setter opp request
  httpRequest.send(); // Sender request
```

---
# Laste data

```javascript
  fetch('http://localhost:5000/sok?tag=bekk')
```
---
# Laste data

```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    // her kan du gjøre noe med responsen
  });
```
---
# Laste data

--
## JSON

```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    return response.json();
  });
```

--
## Text

```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    return response.text();
  });
```

--
## Blob
```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    return response.blob();
  });
```

---
# Laste data

```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    return response.json();
  }).then(function(data) {
    console.log(data);
  });
```
--

```
  [{
    "url":"https://flickr.com/bilde1.jpg",
    "title":"Fint bilde av en bekker"
  },{
    "url":"https://flickr.com/bilde2.jpg",
    "title":"Ikke fullt så fint bilde av en bekker"
  },{
    "url":"https://flickr.com/bilde3.jpg",
    "title":"Rart bilde av en bekk"
  },{
    ...
  }]
```
---
# Laste data

```javascript
  fetch('http://localhost:5000/sok?tag=bekk').then(function(response) {
    return response.json();
  }).then(function(data) {
    console.log(data);
  }).catch(function(error) {
    throw error;
  });
```

---
# Same origin policy

```javascript
  fetch('https://ntnu.no');
```
--

You will receive an error. `XMLHttpRequest` cannot load https://ntnu.no. No `'Access-Control-Allow-Origin'` header is present on the requested resource. Origin http://localhost:5000 is therefore not allowed access.

--

An origin is defined as a combination of URI scheme, hostname, and port number.

---
# Same origin policy

<div class="example-same-origin">
  http://localhost:5000
</div>

--
<div class="example-same-origin">
  https://ntnu.no:443
</div>

---

# Same origin policy

<div class="example-same-origin">
  <span class="protocol">http</span>://<span class="domain">localhost</span>:<span class="port">5000</span>
</div>

<div class="example-same-origin">
  <span class="protocol">https</span>://<span class="domain">ntnu.no</span>:<span class="port">443</span>
</div>

--
<div style="margin-top:0.5em;font-size: 5em">&#128557;</div>



---
# Same origin policy

<div class="example-same-origin">
  <span class="protocol">http</span>://<span class="domain">localhost</span>:<span class="port">5000</span>
</div>

<div class="example-same-origin">
  <span class="protocol">http</span>://<span class="domain">localhost</span>:<span class="port">5000</span>/sok?tag=bekk
</div>

--

<div style="margin-top:0.5em;font-size: 5em">&#128571;</div>
---
class: center middle

# DevTool

## ⌘ + ⌥ + i &nbsp;/&nbsp; ctrl + ⇧ + i

---
class: split

# Oppgave

* Gjør en request mot `/sok?tag=bekk` når siden blir lastet
* Logg ut resultatet i consollet

<iframe src="http://localhost:5001/" style="width: 50%; border-left: 1px solid #515151;" />


---
class: center middle

#Forms

---

#Form

Representerer en interaktiv del av siden, og brukes for å sende data til en server
```html
<form></form>
```

---

#Form

Representerer en interaktiv del av siden, og brukes for å sende data til en server
```html
<form></form>
```

*Noen nyttige attributter*
```html
<form action="url"></form>
```

---

#Form

Representerer en interaktiv del av siden, og brukes for å sende data til en server
```html
<form></form>
```

*Noen nyttige attributter*
```html
<form action="url"></form>
```

```html
<form action="url" method="get"></form>   // url?key=value1&key2=value2
<form action="url" method="post"></form>  // url
```

---

#Form

Representerer en interaktiv del av siden, og brukes for å sende data til en server
```html
<form></form>
```

*Noen nyttige attributter*
```html
<form action="url"></form>
```

```html
<form action="url" method="get"></form>   // url?key=value1&key2=value2
<form action="url" method="post"></form>  // url
```

*Noen ikke fullt like nyttige attributter*
```
accept-charset, autocomplete, enctype, name, novalidate, target, ...
```
Sjekk <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form" target="_blank">MDN form</a>

---

#Input

Definerer hva som skal sendes til serveren
```html
<form action="url" method="get">
  <input type="text" />
</form>
```

---

#Input

Definerer hva som skal sendes til serveren
```html
<form action="url" method="get">
  <input type="text" />
</form>
```

```html
<form action="url" method="get">
  <input type="text" name="sok" value="" placeholder="Søk" />
</form>
```

---

#Input

Definerer hva som skal sendes til serveren
```html
<form action="url" method="get">
  <input type="text" />
</form>
```

```html
<form action="url" method="get">
  <input type="text" name="sok" value="" placeholder="Søk" />
</form>
```

<label><input type="checkbox" /> checkbox</label><br />
<label><input type="radio" name="radio" /> radio1</label>
<label><input type="radio" name="radio" /> radio2</label><br />
<label><input type="date" /></label>

---

#Input

Definerer hva som skal sendes til serveren
```html
<form action="url" method="get">
  <input type="text" />
</form>
```

```html
<form action="url" method="get">
  <input type="text" name="sok" value="" placeholder="Søk" />
</form>
```

<label><input type="checkbox" /> checkbox</label><br />
<label><input type="radio" name="radio" /> radio1</label>
<label><input type="radio" name="radio" /> radio2</label><br />
<label><input type="date" /></label>


Sjekk <a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/Input" target="_blank">MDN input</a>

---
class: cols two

#Input

.col[
<input type="text" data-ex="1" data-listen-for="keyup" data-value-prop="value" />
]
.col[
<span id="ex1"></span>
]

.col[
<input type="checkbox" data-ex="2" data-listen-for="change" data-value-prop="checked" />
]
.col[
<span id="ex2"></span>
]

Uthenting av verdien til ett element varierer.

For tekstelement;
```javascript
document.querySelector('#da-tekstelement').value
```

For checkbox;
```javascript
document.querySelector('#da-checkbox').checked
```

---
class: cols two

#Browser default


.col[
<label><input type="checkbox" />Default</label>
]
.col[
```html
<input type="checkbox" />
```
]

.col[
<label><input type="checkbox" class="prevent" />Endret</label>
]
.col[
```javascript
document
  .querySelector('input')
  .addEventListener('click', function(e) {
    e.preventDefault();
  });
```
]

Form- og input-elementer kommer med en del *default behaviour* fra browseren.

Denne oppførselen kan hindres ved hjelp av `preventDefault()`

---

#Submit

*Submit*-knapp
```html
<form action="/sok.html" method="post">
  <input type="text" name="sok" value="" autocomplete="off"/>
  <button type="submit">Søk</button>
</form>
```

---

#Submit

*Submit*-knapp
```html
<form action="/sok.html" method="post">
  <input type="text" name="sok" value="" autocomplete="off"/>
  <button type="submit">Søk</button>
</form>
```

Det skjer en `submit`-event når `form` skal sendes til serveren.

---

#Submit

*Submit*-knapp
```html
<form action="/sok.html" method="post">
  <input type="text" name="sok" value="" autocomplete="off"/>
  <button type="submit">Søk</button>
</form>
```

Det skjer en `submit`-event når `form` skal sendes til serveren.

Dette kan lyttes etter ved hjelp av `addEventListener`

```javascript
document.querySelector('.mitt-form').addEventListener('submit', function(event) {
  // Stop default behaviour
  // Do something
});
```

---
class: split

# Oppgave

* Forsett på løsningen fra forrige oppgave
* Legg til submit event handler på form'et
* Hent ut verdien som er skrevet inn i tekstfeltet
* Bruk verdien til å hente ut og vise de nye bildene

<iframe src="http://localhost:5004/" style="width: 50%; border-left: 1px solid #515151;" />

---
class: center middle bekk-top

# Takk for oss!

bekk.no/jobb

    </textarea>
    <script src="https://cdn.rawgit.com/bekk/remark/master/vendor/remark.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      'use strict';
      var slideshow = remark.create({
        ratio: '16:9',
        highlightLanguage: 'javascript',
        highlightStyle: 'monokai',
        navigation: {
          scroll: false
        }
      });

      var dateStr = new Date().toLocaleString('nb-NO', { year: 'numeric', month: 'long', day: 'numeric' });

      document.querySelector('.today-date').textContent = dateStr;

      document.querySelector('#load-data').addEventListener('click', event => {
        event.target.outerHTML = '<img src="resources/spinner.svg" />';
      });

      // Uthenting av .value eksempel
      Array.prototype.slice.call(document.querySelectorAll('[data-ex]'), 0)
        .forEach((ex) => {
          const view = document.querySelector('#ex' + ex.dataset.ex);
          view.textContent = (''+ex[ex.dataset.valueProp]) || ' ';

          ex.addEventListener(ex.dataset.listenFor, (e) => {
            const value = e.target[ex.dataset.valueProp];
            view.textContent = (''+value) || ' ';
          });
        });
    </script>
    <script type="text/javascript">
      // Prevent default example
      document
        .querySelector('.prevent')
        .addEventListener('click', function(e) {
          e.preventDefault();
        });
    </script>
  </body>
</html>
